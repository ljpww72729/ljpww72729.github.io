---
layout: post
title: emacs快捷方式
date: 2018-04-01 23:49 +0800
categories:
  - tools
tags:
  - emacs
---

{::comment}
这里显示的是摘要信息也是概要信息
{:/comment}

emacs快捷方式汇总

<!-- more -->

{% include toc.html %}

#### 基本快捷方式

M ： META 键，如果你没有 META、EDIT 或 ALT 键那么就先按 <ESC> 再按对应的键  
C-x C-c 退出 Emacs  
C-g  终止一条执行过久的命令，还可以取消数字参数和只输入到一半的命令。  
C-v     向前移动一屏  
M-v     向后移动一屏  
C-l     重绘屏幕，并将光标所在行置于屏幕的中央（注意是 CONTROL-L，不是 CONTROL-1）  

C-f     向右移动一个字符  
C-b     向左移动一个字符  
M-f     向右移动一个词【对中文是移动到下一个标点符号】  
M-b     向左移动一个词【对中文是移动到上一个标点符号】  
C-n     移动到下一行  
C-p     移动到上一行  
C-a     移动到行首  
C-e     移动到行尾  
M-a     移动到句首  
M-e     移动到句尾  

“P N B F”四个字母分别代表了四个词，用这四个词记忆这些组合键会更容易：  
P 代表 previous（上一行），N 代表 next（下一行），B 代表 backward（回退），而 F 则代表 forward（前进）。这些组合键今后将与你形影不离。  

请注意 C-f 、C-b 和 M-f 、M-b 两对之间的类比关系。通常的惯例是：META 系列组合键用来操作“由语言定义的单位（比如词、句子、段落）”，而 CONTROL系列组合键用来操作“与语言无关的基本单位（比如字符、行等等）”。  

M-< （META 小于号，按住shift键）可以将光标移动到所有文字的最开头；  
M-> （META 大于号，按住shift键）可以将光标移动到所有文字的最末尾。  
C-u 8 C-f 会向前移动 8 个字符  
C-u 8 C-v 将文本向下滚动 8 行，而不是8屏  

C-h k C-f 查找C-f快捷键的帮助文档（创建一个新的窗口用于显示帮助文档）  
C-x 1   只保留一个窗格（也就是关掉其它所有窗格）  
C-u 0 C-l  将光标所在的行滚动为第一行  
如果你不小心按了一下 <ESC>，你也可以用 C-g 来取消它。  
【这个说法似乎有问题，因为按照这个按键顺序输入的应该是 C-M-g。  
  取消 <ESC> 的正确做法是再连按两次 <ESC>。】  

#### 窗格  

有一系列命令是以 CONTROL-x 开始的，这些命令许多都跟“窗格、文件、缓冲区【缓冲区（buffer）会在后文详细介绍】”等等诸如此类的东西有关，其中有些命令可能包含了 2 个、3 个或者 4 个字符。  
C-x 1   只保留一个窗格（也就是关掉其它所有窗格）。  
C-h k C-f  观察当一个新窗格出现时当前窗格（该命令用来显示C-f 命令的帮助文档）是如何缩小的。
   
#### 插入与删除  

C-u 8 *，这将会插入8个连续的 * 号，重复执行输入字符的命令实际上就是输入多个相同的字符。      

<DEL\>       删除光标前的一个字符  
C-d          删除光标后的一个字符  
M-<DEL\>     移除光标前的一个词  
M-d          移除光标后的一个词  
C-k          移除从光标到“行尾”间的字符  
M-k          移除从光标到“句尾”间的字符  

选中某一部分文字：首先把光标移动到你想要移除的区域的一端，然后按 C-<SPC\>（<SPC\>指空格）【注意，C-<SPC\> 往往被中文用户设定成输入法热键，如果这样，C-<SPC\> 就被系统拦截而无法传递给 Emacs 了，在这种情况下可以使用C-@。】，然后将光标移动到你准备移除的文字的另一端。这个时候， Emacs 会高亮光标和你按下 C-<SPC\> 之间的文本。  

C-w 剪切复制光标所在的行  
M-w 复制光标所在的行  
C-y 粘贴  
M-y 连续召回：在用 C-y 召回最近移除的文字之后，紧接着再按 M-y 就可以召回再前一次被移除的内容，再按一次 M-y 又可以召回再上一次的……连续使用 M-y 直到找到你想要召回的东西，然什么也不用做，继续编辑就行了。  
C-/ 撤销  

#### 文件  
 C-x C-f 输入文件名创建一个缓冲文件  
 C-x C-f   寻找一个文件  
 C-x C-s   储存这个文件  

#### 缓冲区  
 C-x b 显示缓冲区  
 C-x s   保存多个缓冲区  

 * 命令集扩展（EXTENDING THE COMMAND SET）  
 C-x     字符扩展。  C-x 之后输入另一个字符或者组合键。  
 M-x     命令名扩展。M-x 之后输入一个命令名。  
 C-x C-z 最大最小话emacs  
C-x C-b         列出缓冲区。  
C-x C-c         离开 Emacs。  
C-x 1           关掉其它所有窗格，只保留一个。  
C-x u           撤销，以一种git log的简单方式显示当前文档的修改历史，可以回撤到自己想要的文件内容！！  
替换：replace-string（字符串替换）这个命令，它会把一个字符串替换成另一个。在输入 M-x 之后，Emacs 会在屏幕底端向你询问并等待你输入命令名。如你想输入“replace-string”，其实只需要敲“repl s<TAB\>”就行了，Emacs 会帮你自动补齐。输入完之后按 <Return\> 提交。注意！！！！只会替换掉光标之后符合条件的字段。  
 M-% 交互式替换  （暂不清楚如何使用）  


#### 自动保存（AUTO SAVE），恢复缓存文件  
-----------------------
如果你已经修改了一个文件，但是还没来得及存盘你的计算机就罢工了，那么你所做的修改就很可能会丢失。为了避免这样的不幸发生，Emacs 会定期将正在编辑的文件写入一个“自动保存”文件中。自动保存文件的文件名的头尾各有一个“#”字符，比如你正在编辑的文件叫“hello.c”，那么它的自动保存文件就叫“#hello.c#”。这个文件会在正常存盘之后被 Emacs 删除。  

所以，假如不幸真的发生了，你大可以从容地打开原来的文件（注意不是自动保存文件）然后输入 M-x recover file <Return\> 来恢复你的自动保存文件。在提示确认的时候，输入 yes<Return\>。  

#### 状态栏（MODE LINE）  
主模式都是可以用 M-x 启动的扩展命令，M-x fundamental-mode 就可以切换到 Fundamental模式。 Fundamental 模式中，M-f 和 M-b 都将单引号视为分隔单词的符号。  

 M-x text-mode 切换到自然语言文本模式，该模式下，M-f 和 M-b 现在把单引号（'）视为词的一部分。  

自动折行模式：  
自动折行（Auto Fill）的辅模式很有用，特别是在编辑自然语言文本的时候。启用自动折行后，Emacs 会在你打字超出一行边界时自动替你换行。  
用 M-x auto-fill-mode <Return\> 启动自动折行模式。再用一次这条命令，自动折行模式会被关闭。也就是说，如果自动折行模式没有被开启，这个命令会开启它；如果已经开启了，这个命令会关闭它。所以我们说，这个命令可以用来“开关（toggle）”模式。  

#### 搜索  
C-s 是向前搜索，C-r 是向后搜索。  
【你会发现 C-g 会让光标回到搜索开始的位置，而 <Return\> 则让光标留在搜索结果上，这是很有用的功能。】  

#### 多窗格  
C-x 2，它会将屏幕划分成两个窗格。  
C-x o 将光标移回到其他窗格里，C-x o 可以遍历所有窗格。  
查找文件并在一个新的窗格打开：输入 C-x 4 C-f，紧跟着输入一个文件名，再用 <Return\> 结束。可以看到你指定的文件出现在下方的窗格中，同时光标也跳到了那里。  
C-x 0	Close current window  
C-x 1	Close all windows except the current one  
C-x 2	Split current window in two vertically  
C-x 3	Split current window in two horizontally  
C-x o	Switch to other window  

#### 多窗口  
 M-x make-frame <Return\>。可以看到一个新的窗口出现在了你的屏幕上。  
 M-x delete-frame <Return\>。这个命令将会关闭选中的窗口。  
 C-x 5 0	Close current frame  
 C-x 5 1	Close all frames except the current one  
 C-x 5 2	Create a new frame  

#### 递归编辑  
ESC ESC ESC 离开递归编辑，这是一个最通用的“离开”命令，你甚至可以使用它来关掉多余的窗格，或者离开小缓冲。（赞一个！）你不能用 C-g 退出递归编辑，因为 C-g 的作用是取消“本层递归编辑之内”的命令和其参数（arguments）。  

其他快捷方式：  
1. 格式化代码：  
C-x h：全选  
M-x indent-region  
2. 在当前行之前加入一空行：C-j
3. 在代码后面添加注释：M+;
4. 替换光标之后的匹配的字符串（注意按住shift）：M+%
5. 多光标  
C-< 光标向上  
C->或C-+ 光标向下  
6. 移动光标所在的行向上或向下移动（与mac系统快捷键冲突）  
M-up或者M-down  
7. 以「括号对」为向前、向后跳转光标  
C-M-p / c-M-n  
8. 使用键盘宏 kbd-macro录制宏，例如：  
   C-x ( start-kbd-macro  
   C-n  到下一行  
   C-e  移动到行尾  
   C-S-b  选中最后一个字符  
   C-w  删除之  
   C-x )  end-kbd-macro  
以上录制了宏，下面调用录制的宏（也可以将宏录制下来保存为函数）：  
   C-x e       执行 1 次刚才录制的宏  
   C-u 5 C-x e 执行 5 次刚才录制的宏，当然也可以执行 1000 遍啦  
   C-u 0 C-x e 也可以执行到buffer end，即执行无限次  
9. 输入的lambda转为𝝺字符如何处理？  
M-x prettify-symbols-mode 从而切换是否转换为𝝺  
参见：http://ergoemacs.org/emacs/emacs_pretty_lambda.html  
10. 从当前光标处换行到下一行  
M-j或者C-j  
10. 在光标所行下插入一新行  
shift-enter  


要使用帮助（Help）功能，请先输入 C-h，然后再输入一个字符以说明你需要什么帮助。如果你连自己到底需要什么帮助都不知道，那么就输入 C-h ?，Emacs会告诉你它能提供了哪些帮助。如果你按了 C-h 又想反悔，可以用 C-g 取消。  
  
快捷键参考：https://aifreedom.com/technology/112  

